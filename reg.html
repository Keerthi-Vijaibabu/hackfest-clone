<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>College Filter</title>
    <style>
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }
      th,
      td {
        border: 1px solid black;
        padding: 8px;
        text-align: left;
      }
      th {
        background-color: #f2f2f2;
      }
    </style>
  </head>
  <body>
    <h2>Filter Colleges</h2>

    <label for="stateFilter">Select State:</label>
    <select id="stateFilter">
      <option value="">All States</option>
      <option value="Karnataka">Karnataka</option>
    </select>

    <label for="hubFilter">Select Hub:</label>
    <select id="hubFilter">
      <option value="">All Hubs</option>
      <option value="Bangalore">Bangalore</option>
    </select>

    <button onclick="applyFilters()">Filter</button>

    <table id="collegeTable">
      <thead>
        <tr>
          <th>Sl No</th>
          <th>State</th>
          <th>Hub</th>
          <th>Date</th>
          <th>College</th>
          <th>SPOC</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <script>
      let collegeData = [];

      async function loadColleges() {
        try {
          let response = await fetch(
            "./assets/data/Hackfest_2025_College_List.json"
          ); // Update with correct file path
          let jsonData = await response.json();
          collegeData = jsonData["Sheet1"]; // Accessing 'Sheet1'
          displayData(collegeData);
        } catch (error) {
          console.error("Error loading JSON:", error);
        }
      }

      function applyFilters() {
        let stateFilter = document.getElementById("stateFilter").value;
        let hubFilter = document.getElementById("hubFilter").value;

        let filteredData = collegeData.filter((college) => {
          return (
            (stateFilter === "" || college.State === stateFilter) &&
            (hubFilter === "" || college.hub === hubFilter)
          );
        });

        displayData(filteredData);
      }

      function displayData(data) {
        let tbody = document.querySelector("#collegeTable tbody");
        tbody.innerHTML = "";

        data.forEach((college) => {
          let row = `<tr>
                    <td>${college["Sl No"]}</td>
                    <td>${college.State}</td>
                    <td>${college.hub}</td>
                    <td>${college.Date}</td>
                    <td>${college.college}</td>
                    <td>${college.SPOC}</td>
                </tr>`;
          tbody.innerHTML += row;
        });
      }

      window.onload = loadColleges;
    </script>
  </body>
</html>
